<!-- Main content -->
<section class="content content-margin">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card card-default">
          <div class="card-header">
            <h3 class="card-title">Reactive Form Dinamic</h3>

            <div class="card-tools">
              <button type="button" class="btn btn-tool">
                <i class="fas fa-info"></i>
              </button>
              <button
                type="button"
                class="btn btn-tool"
                data-card-widget="collapse"
              >
                <i class="fas fa-minus"></i>
              </button>
            </div>
          </div>
          <!-- /.card-header -->
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <form
                  autocomplete="off"
                  [formGroup]="miFormulario"
                  (ngSubmit)="guardar()"
                  class="form-horizontal"
                >
                  <!-- Group Form Nombre -->
                  <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Nombre :</label>
                    <div class="col-sm-9">
                      <input
                        class="form-control"
                        formControlName="nombre"
                        placeholder="Nombre de la persona"
                      />
                      <span
                        class="form-text text-danger"
                        *ngIf="campoEsValido('nombre')"
                      >
                        Este campo es obligatorio
                      </span>
                    </div>
                  </div>
                  <!-- Group Form Agregar -->
                  <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Agregar :</label>
                    <div class="col-sm-9">
                      <div class="input-group">
                        <input
                          class="form-control"
                          [formControl]="nuevoFavorito"
                          placeholder="Agregar favorito"
                          (keyup.enter)="agregarFavorito()"
                        />

                        <button
                          class="btn btn-outline-primary"
                          type="button"
                          (click)="agregarFavorito()"
                        >
                          Agregar
                        </button>
                      </div>
                    </div>
                  </div>
                  <!-- Group Form Favoritos -->
                  <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Favoritos :</label>
                    <div class="col-sm-9" formArrayName="favoritos">
                      <div
                        class="input-group mb-1"
                        *ngFor="
                          let favorito of favoritosArr.controls;
                          let i = index
                        "
                      >
                        <input class="form-control" [formControlName]="i" />

                        <button
                          class="btn btn-outline-danger"
                          type="button"
                          (click)="borrar(i)"
                        >
                          Eliminar
                        </button>
                      </div>
                    </div>
                  </div>
                  <!-- btn submit -->
                  <div class="col">
                    <button type="submit" class="btn btn-primary float-end">
                      Guardar | ver en consola
                    </button>
                  </div>
                  <hr />
                </form>
              </div>

              <div class="col-md-6">
                <h6 class="text-center">Estado Del Formulario</h6>
                <div class="row">
                  <div class="col-2"></div>
                  <div class="col-5">
                    <p>Valid : {{ miFormulario.valid }}</p>
                    <p>Value :</p>
                    <p>{{ miFormulario.value | json }}</p>
                  </div>
                  <div class="col-5">
                    <p>Pristine : {{ miFormulario.pristine }}</p>
                    <p>Touched : {{ miFormulario.touched }}</p>
                    <p>
                      Agregar Juego :
                      {{ nuevoFavorito.valid }} | {{ nuevoFavorito.value }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
